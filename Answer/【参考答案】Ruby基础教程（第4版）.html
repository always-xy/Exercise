<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>【参考答案】Ruby基础教程（第4版）</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>

<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>


</head>

<body>

<h1 id="toc_0">Ruby基础教程（第4版）练习题参考答案</h1>

<hr>

<h2 id="toc_1">第12章</h2>

<p>（1）的参考答案  </p>

<p>使用问题中提供的公式直接定义方法。  </p>

<div><pre><code class="language-none">def cels2fahr(cels)
  return cels * 9.0 / 5.0 + 32.0
end</code></pre></div>

<p>虽然问题中的公式为“华氏 ＝ 摄氏 × 9 ÷ 5 ＋ 32”，但为了用浮点小数表示计算结果，9、5分别转换为9.0、5.0。如果不做这样的转换，当cels为整数时无法得到正确的结果（除以5的结果为Integer）。  </p>

<p>（2）的参考答案  </p>

<p>定义（1）的逆运算。请读者注意，由于“+”与“*”优先级不一样，因此这里需要加上括号。</p>

<div><pre><code class="language-none">def fahr2cels(fahr)
  return (fahr.to_f - 32) * 5.0 / 9.0
end</code></pre></div>

<p>接下来，使用upto方法实现华氏温度从1~100的递增。  </p>

<div><pre><code class="language-none">1.upto(100) do |i|
  print i, &quot; &quot;, fahr2cels(i), &quot;\n&quot;
end</code></pre></div>

<p>（3）的参考答案  </p>

<p>使用10.6节中介绍的rand方法。由于执行“rand(6)”时，所得到的返回值只是0到5，因此我们还需要将得到的结果加1。  </p>

<div><pre><code class="language-none">def dice
  return rand(6) + 1
end</code></pre></div>

<p>（4）的参考答案  </p>

<p>可能有读者想直接使用dice+dice+……这样的写法，但在这里我们应该使用循环来解答问题。  </p>

<div><pre><code class="language-none">def dice10
  ret = 0
  10.times do
    ret += dice
  end
  ret
end</code></pre></div>

<p>（5）的参考答案</p>

<p>首先，比2小的数不可能为素数。对于2以上的数，我们将该数与从2开始到该数平方根之间的整数逐个进行除法运算，确认所有运算结果的余数都不为0。  </p>

<div><pre><code class="language-none">def prime?(num)
  return false if num &lt; 2
  2.upto(Math.sqrt(num)) do |i|
    if num % i == 0
      return false
    end
  end
  return true
end</code></pre></div>

<hr>

<h2 id="toc_2">第13章</h2>

<p>（1）的参考答案  </p>

<p>在这里我们列举两种方法。使用像“ary = [1, 2, 3, ...]”这样一般用于定义小数组的方法，以及使用字面量直接定义数组的方法。  </p>

<div><pre><code class="language-none"># 创建空数组，然后把1到100的值逐个放到数组中
a = []
100.times{|i| a[i] = i + 1 }

# 使用范围对象的to_a方法
a = (1..100).to_a</code></pre></div>

<p>（2）的参考答案  </p>

<p>一般使用Array#collect方法时会创建新的数组。在原数组的基础上扩大100倍时，我们使用带“!”的Array#collect!方法。  </p>

<div><pre><code class="language-none"># 创建数组
a = (1..100).to_a

# 利用全部数组元素扩大100倍后的值创建新的数组
a2 = a.collect{|i| i * 100 }
p a2

# 全部数组元素扩大100倍
a.collect!{|i| i * 100 }
p a</code></pre></div>

<p>（3）的参考答案  </p>

<p>使用Array#reject方法去除符合条件的元素。</p>

<div><pre><code class="language-none"># 创建数组
a = (1..100).to_a

# 取出ary中为3的倍数的元素
a3 = a.reject{|i| i % 3 != 0 }
p a3

# 另外，还有只返回符合条件的元素，不需要带!的select方法
a4 = a.select{|i| i % 3 == 0 }
p a4

# 删除ary中3的倍数以外的元素
a.reject!{|i| i % 3 != 0 }
p a</code></pre></div>

<p>（4）的参考答案  </p>

<p>在Array#sort以及Array#sort_by方法中，若将块结果乘以-1，则会对结果进行倒排序。  </p>

<div><pre><code class="language-none"># 创建数组
a = (1..100).to_a

# (a) 使用Array#reverse方法
a2 = a.reverse
p a2

# (b) 使用Array#sort方法
a2 = a.sort{|n1, n2| -(n1 &lt;=&gt; n2) }
p a2

# (c) 使用Array#sort_by方法
a2 = a.sort_by{|i| -i }
p a2</code></pre></div>

<p>（5）的参考答案  </p>

<p>使用Array#inject方法是本题的另外一种解法。使用Array#each方法时，我们需要定义变量（本例中的result）用于保存累加的值，而使用Array#inject方法则不需要。  </p>

<div><pre><code class="language-none"># 创建数组
a = (1..100).to_a

# (a) 使用Array#each方法求和
result = 0
a.each{|i| result += i }
p result

# (b) 使用Array#inject方法求和
p a.inject(0){|memo, i| memo += i }</code></pre></div>

<p>（6）的参考答案  </p>

<p>指定首个元素索引以及所获取的元素个数。  </p>

<div><pre><code class="language-none"># 创建数组
ary = (1..100).to_a
result = Array.new
10.times do |i|
  result &lt;&lt; ary[i*10, 10]
end
p result</code></pre></div>

<p>（7）的参考答案  </p>

<p>本题的解答重点在于，使用Array#each遍历ary1各元素的同时，使用相应的索引访问ary2的各元素。另外一种解法是使用Array#zip方法，该方法可以同时方法配对的两个数组中的各元素。  </p>

<div><pre><code class="language-none">def sum_array(ary1, ary2)
  result = Array.new
  i = 0
  ary1.each do |elem1|
    result &lt;&lt; elem1 + ary2[i]
    i+=1
  end
  return result
end

# 使用Array#zip方法的另外一种解法
def sum_array_zip(ary1, ary2)
  result = Array.new
  ary1.zip(ary2){|a, b| result &lt;&lt; a + b }
  return result
end

p sum_array([1, 2, 3], [4, 6, 8])</code></pre></div>

<hr>

<h2 id="toc_3">第14章</h2>

<p>（1）的参考答案  </p>

<p>直接使用split方法即可。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
ary = str.split
p ary</code></pre></div>

<p>（2）的参考答案  </p>

<p>对只由英文字母字符串，不带参数调用Array.sort即可以进行排序。这里我们顺便复习一下数组的用法。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
ary = str.split
p ary.sort</code></pre></div>

<p>（3）的参考答案  </p>

<p>在这里，我们使用Array#sort_by方法对参数进行比较。此时，我们先使用String#downcase方法强制将字符串转换为小写后再进行比较，由此实现不区分大小写进行排序。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
ary = str.split
p ary.sort_by{|s| s.downcase }</code></pre></div>

<p>（4）的参考答案</p>

<p>使用String#capitalize方法将字符串的首字母转换为大写。配合Array#collect方法，对数组中各元素进行转换。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
ary = str.split
cap_ary = ary.collect{|word| word.capitalize }

str = &quot;&quot;
cap_ary.each do |s|
  str &lt;&lt; s+&quot; &quot;
end
p str

## 另一种解法
p cap_ary.join(&quot; &quot;)</code></pre></div>

<p>另外，使用另外一种解法时，Array#join方法使字符串连接变得简单。这个方法可以连接数组中的字符串，还可以通过参数指定各元素间的连接符。  </p>

<div><pre><code class="language-none">p [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].join        #=&gt; &quot;abc&quot;
p [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].join(&quot;-&quot;)   #=&gt; &quot;a-b-c&quot;</code></pre></div>

<p>（5）的参考答案  </p>

<p>创建散列，将字符作为键，该字符出现的次数作为值进行记录。最后对字符进行排序，将出现次数转换为星号后输出。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
count = Hash.new
str.each_char do |c|
  count[c] = 0 unless count[c]
  count[c] += 1
end
count.keys.sort.each do |c|
  printf(&quot;&#39;%s&#39;: %s\n&quot;, c, &quot;*&quot; * count[c])
end</code></pre></div>

<p>在初始化散列时，可以像下面那样将0作为散列的默认值返回。  </p>

<div><pre><code class="language-none">str = &quot;Ruby is an object oriented programming language&quot;
count = Hash.new(0)
str.each_char do |c|
  count[c] += 1
end
count.keys.sort.each do |c|
  printf(&quot;&#39;%s&#39;: %s\n&quot;, c, &quot;*&quot; * count[c])
end</code></pre></div>

<p>（6）的参考答案  </p>

<p>本题是一个颇复杂的实际问题。</p>

<div><pre><code class="language-none">def han2num(string)
  digit4 = digit3 = digit2 = digit1 = &quot;0&quot;

  nstring = string.dup
  nstring.gsub!(/一/, &quot;1&quot;)
  nstring.gsub!(/二/, &quot;2&quot;)
  nstring.gsub!(/三/, &quot;3&quot;)
  nstring.gsub!(/四/, &quot;4&quot;)
  nstring.gsub!(/五/, &quot;5&quot;)
  nstring.gsub!(/六/, &quot;6&quot;)
  nstring.gsub!(/七/, &quot;7&quot;)
  nstring.gsub!(/八/, &quot;8&quot;)
  nstring.gsub!(/九/, &quot;9&quot;)

  if nstring =~ /((\d)?千)?((\d)?百)?((\d)?十)?(\d)?$/
    if $1
      digit4 = $2 || &quot;1&quot;
    end
    if $3
      digit3 = $4 || &quot;1&quot;
    end
    if $5
      digit2 = $6 || &quot;1&quot;
    end
    digit1 = $7 || &quot;0&quot;
  end

  return (digit4+digit3+digit2+digit1).to_i
end

p han2num(&quot;七千八百二十三&quot;)
p han2num(&quot;千八百二十三&quot;)
p han2num(&quot;八百二十三&quot;)
p han2num(&quot;百二十三&quot;)
p han2num(&quot;百三&quot;)
p han2num(&quot;二十三&quot;)
p han2num(&quot;十三&quot;)
p han2num(&quot;三&quot;)</code></pre></div>

<hr>

<h2 id="toc_4">第15章</h2>

<p>（1）的参考答案  </p>

<p>虽然可以逐个分别定义，但这次我们试试合在一起定义。  </p>

<div><pre><code class="language-none">wday = {
  &quot;sunday&quot;    =&gt; &quot;星期天&quot;,
  &quot;monday&quot;    =&gt; &quot;星期一&quot;,
  &quot;tuesday&quot;   =&gt; &quot;星期二&quot;,
  &quot;wedensday&quot; =&gt; &quot;星期三&quot;,
  &quot;thursday&quot;  =&gt; &quot;星期四&quot;,
  &quot;friday&quot;    =&gt; &quot;星期五&quot;,
  &quot;saturday&quot;  =&gt; &quot;星期六&quot;,
}</code></pre></div>

<p>（2）的参考答案  </p>

<p>直接使用Hash#size方法即可。  </p>

<div><pre><code class="language-none">wday = {
  &quot;sunday&quot;    =&gt; &quot;星期天&quot;,
  &quot;monday&quot;    =&gt; &quot;星期一&quot;,
  &quot;tuesday&quot;   =&gt; &quot;星期二&quot;,
  &quot;wedensday&quot; =&gt; &quot;星期三&quot;,
  &quot;thursday&quot;  =&gt; &quot;星期四&quot;,
  &quot;friday&quot;    =&gt; &quot;星期五&quot;,
  &quot;saturday&quot;  =&gt; &quot;星期六&quot;,
}

p wday.size  #=&gt; 7</code></pre></div>

<p>（3）的参考答案  </p>

<p>一般可用数组作为键，此次为了简化程序使用了%w。  </p>

<div><pre><code class="language-none">wday = {
  &quot;sunday&quot;    =&gt; &quot;星期天&quot;,
  &quot;monday&quot;    =&gt; &quot;星期一&quot;,
  &quot;tuesday&quot;   =&gt; &quot;星期二&quot;,
  &quot;wedensday&quot; =&gt; &quot;星期三&quot;,
  &quot;thursday&quot;  =&gt; &quot;星期四&quot;,
  &quot;friday&quot;    =&gt; &quot;星期五&quot;,
  &quot;saturday&quot;  =&gt; &quot;星期六&quot;,
}

%w(sunday monday tuesday wedensday thursday friday saturday).each do |day|
  puts &quot;“#{day}”是#{wday[day]}。&quot;
end</code></pre></div>

<p>（4）的参考答案  </p>

<p>使用String#split分割字符串后，再使用Array#shift方法将元素逐个取出，创建散列。  </p>

<div><pre><code class="language-none">def str2hash(str)
  hash = Hash.new()
  array = str.split(/\s+/)
  while key = array.shift
    value = array.shift
    hash[key] = value
  end
  return hash
end

p str2hash(&quot;bule 蓝 white 白\nred 红&quot;)</code></pre></div>

<hr>

<h2 id="toc_5">第16章</h2>

<p>（1）的参考答案  </p>

<p>判断电子邮件格式规则颇为复杂，甚至有些正在使用的电子邮件格式本身就不符合规则，因此解析电子邮件不是一件容易的事情，这里我们用简化后的规则进行解析。  </p>

<div><pre><code class="language-none">def get_local_and_domain(str)
  str =~ /^([^@]+)@(.*)$/
  localpart = $1
  domain = $2
  return [localpart, domain]
end

p get_local_and_domain(&quot;info@example.com&quot;)</code></pre></div>

<p>（2）的参考答案<br>
很难只置换一次就达到题目要求，因此我们分两次置换。若先用“简单”置换“难”，则“难懂”部分则会变为“简单懂”，因此我们首先用“易懂”置换“难懂”。  </p>

<div><pre><code class="language-none">s = &quot;正则表达式真难啊，怎么这么难懂！&quot;
puts s.gsub(/难懂/, &quot;易懂&quot;).gsub(/难/, &quot;简单&quot;)</code></pre></div>

<p>（3）的参考答案  </p>

<p>思路基本上与第14章的问题（4）一样，在正则表达式中使用“-”时需要经过转义。在下面的参考答案中，我们尝试使用方法链（method chain）将代码都写在一行中。  </p>

<div><pre><code class="language-none">def word_capitalize(str)
  return str.split(/\-/).collect{|w| w.capitalize}.join(&#39;-&#39;)
end

p word_capitalize(&quot;in-reply-to&quot;) #=&gt; &quot;In-Reply-To&quot;
p word_capitalize(&quot;X-MAILER&quot;)    #=&gt; &quot;X-Mailer&quot;</code></pre></div>

<hr>

<h2 id="toc_6">第17章</h2>

<p>（1）的参考答案  </p>

<p>定义wc方法，用于统计文本行数、单词数和字符数。有一点需要读者注意，本例中使用了String#split方法分割单词，当行首有空白字符时，String#split方法的执行结果中会产生空白字符串，因此我们会删除该空白字符串。  </p>

<div><pre><code class="language-none">def wc(file)
  nline = nword = nchar = 0
  File.open(file){|io|
    io.each{|line|
      words = line.split(/\s+/).reject{|w| w.empty? }
      nline += 1
      nword += words.length
      nchar += line.length
    }
  }
  puts &quot;lines=#{nline} words=#{nword} chars=#{nchar}&quot;
end

wc(__FILE__)</code></pre></div>

<p>（2）的参考答案  </p>

<p>根据条件分别定义不同的脚本。首先是文件逆序排列。用IO#readlines方法逐行读取文件后，再用IO#rewind方法返回文件开头，用IO#truncate方法清空内容，最后用Array#reverse方法将逆序后的行写入文件。  </p>

<div><pre><code class="language-none">def reverse(input)
  open(input, &quot;r+&quot;) do |f|
    lines = f.readlines
    f.rewind
    f.truncate(0)
    f.write lines.reverse.join()
  end
end

reverse(ARGV[0])</code></pre></div>

<p>接下来是输出第1行的内容，实际上只需稍微修改一下上面的程序即可实现。  </p>

<div><pre><code class="language-none">def reverse(input)
  open(input, &quot;r+&quot;) do |f|
    lines = f.readlines
    f.rewind
    f.truncate(0)
    f.write lines[0]
  end
end

reverse(ARGV[0])</code></pre></div>

<p>最后是输出最后一行的内容，这里稍微组合了一下（a）（b）的程序。  </p>

<div><pre><code class="language-none">def reverse(input)
  open(input, &quot;r+&quot;) do |f|
    lines = f.readlines
    f.rewind
    f.truncate(0)
    f.write lines.reverse[0]
  end
end

reverse(ARGV[0])</code></pre></div>

<p>（3）的参考答案  </p>

<p>本题的关键在于将读取的行临时保存在变量queue中。  </p>

<div><pre><code class="language-none">def tail(lines, file)
  queue = Array.new
  open(file) do |io|
    while line = io.gets
      queue.push(line)
      if queue.size &gt; lines
        queue.shift
      end
    end
  end
  queue.each{|line| print line }
end

puts &quot;===&quot;
tail(10, __FILE__)

puts &quot;===&quot;
tail(3, __FILE__)</code></pre></div>

<hr>

<h2 id="toc_7">第18章</h2>

<p>（1）的参考答案  </p>

<p>使用FileTest.directory?方法排除目录以外的对象后，再使用Dir.open方法检查目录内的文件名。  </p>

<div><pre><code class="language-none">def print_libraries
  $:.each do |path|
    next unless FileTest.directory?(path)
    Dir.open(path) do |dir|
      dir.each do |name|
        if name =~ /\.rb$/i
          puts name
        end
      end
    end
  end
end

print_libraries</code></pre></div>

<p>另外，虽然在正文并没有详细说明，Ruby中引用的库除了用Ruby实现的之外，还有用C等其他语言实现的。扩展库的文件后缀不是“.rb”，而是像“.dll”“.so”等这样平台依赖的文件。<br>
利用rbconfig库取得后缀名，支持扩展库的版本如下所示。  </p>

<div><pre><code class="language-none">require &quot;rbconfig&quot;

def print_libraries
  $:.each do |path|
    next unless FileTest.directory?(path)
    dlext = RbConfig::CONFIG[&quot;DLEXT&quot;]
    Dir.open(path) do |dir|
      dir.each do |name|
        if name =~ /\.rb$/i || name =~ /\.#{dlext}$/i
          puts name
        end
      end
    end
  end
end

print_libraries</code></pre></div>

<p>（2）的参考答案  </p>

<p>利用了find库。  </p>

<div><pre><code class="language-none">require &quot;find&quot;

def du(path)
  result = 0
  Find.find(path){|f|
    if File.file?(f)
      result += File.size(f)
    end
  }
  printf(&quot;%d %s\n&quot;, result, path)
  return result
end

du(ARGV[0] || &quot;.&quot;)</code></pre></div>

<hr>

<h2 id="toc_8">第19章</h2>

<p>（1）的参考答案  </p>

<div><pre><code class="language-none"># encoding: utf-8

def to_utf8(str_gbk, str_gb2312)
  ## 使用encode方法将字符串分别转换为UTF-8编码后再连接
  str_gbk.encode(&quot;UTF-8&quot;) + str_gb2312.encode(&quot;UTF-8&quot;)
end

## 像下面这样执行
str_gbk  = &quot;你好&quot;.encode(&quot;GBK&quot;)
str_gb2312 = &quot;再见&quot;.encode(&quot;GB2312&quot;)

puts to_utf8(str_gbk, str_gb2312)</code></pre></div>

<p>（2）的参考答案  </p>

<p>按照练习题的处理顺序实现了要求。不过确认创建后的文件编码可能不是一件容易的事。  </p>

<div><pre><code class="language-none"># encoding: utf-8

## 用GBK编码创建gbk.txt
File.open(&quot;gbk.txt&quot;,&quot;w:GBK&quot;) do |f|
  f.write(&quot;你好&quot;)
end

## 打开gbk.txt，按UTF-8编码方式输出
File.open(&quot;gbk.txt&quot;,&quot;r:GBK&quot;) do |f|
  str = f.read
  ## str的编码为GBK，因此在使用puts输出时需将其转换为UTF-8编码
  puts str.encode(&quot;UTF-8&quot;)
end</code></pre></div>

<p>（3）的参考答案  </p>

<p>GB 18030，全称：国家标准GB 18030-2005《信息技术 中文编码字符集》，是中华人民共和国现时最新的内码字集，是GB 18030-2000《信息技术 信息交换用汉字编码字符集 基本集的扩充》的修订版。与GB 2312-1980完全兼容，与GBK基本兼容，支持GB 13000及Unicode的全部汉字，共收录汉字70244个。<br>
GB 18030主要有以下特点：</p>

<ul>
<li>代码页 54936；</li>
<li>与 UTF-8 相同，采用多字节编码，每个字可以由1个、2个或4个字节组成；</li>
<li>编码空间庞大，最多可定义161万个字符；</li>
<li>支持中国国内少数民族的文字，不需要动用造字区；</li>
<li>汉字收录范围包含繁体汉字以及日韩汉字。</li>
</ul>

<p>GBK即汉字内码扩展规范，K为汉语拼音 Kuo Zhan（扩展）中“扩”字的声母。英文全称Chinese Internal Code Specification。<br>
由于GB 2312-80只收录了6763个汉字，部分在GB 2312-80推出以后才简化的汉字（如“啰”），部分人名用字（如中国前总理朱镕基的“镕”字），台湾及香港使用的繁体字，日语及朝鲜语汉字等，并未收录在内。于是微软利用GB 2312-80未使用的编码空间，收录GB 13000.1-93全部字符制定了GBK编码。  </p>

<p>本參考答案中，将UTF-8字符串“鿋”分别转换为GB1830编码以及GBK编码。由于GBK编码并没有收录该汉字，因此在转换时会产生错误。  </p>

<div><pre><code class="language-none"># encoding: utf-8

str = &#39;鿋&#39;

encoding = [Encoding::GB18030, Encoding::GBK]
encoding.each do |enc|
  begin
    print &quot;将str转换为#{enc}。=&gt; &quot;
    puts &quot;结果: %p&quot; % [str.encode(enc)]
  rescue =&gt; ex
    p ex
  end
  puts
end</code></pre></div>

<p>（4）的参考答案  </p>

<p>两者都不是UTF-8编码，因此我们首先都转换为UTF-8编码后再比较。  </p>

<div><pre><code class="language-none"># encoding: utf-8

Dir.glob(&quot;*.txt&quot;) do |filename|
  ## 将UTF8-MAC编码的文件名转换为UTF-8编码后，就可以与UTF-8编码的字符串“ルビー.txt”进行比较
  if filename.encode(&quot;UTF8-MAC&quot;).encode(&quot;UTF-8&quot;) == &quot;ルビー.txt&quot;
    puts &quot;found.&quot;; exit
  end
end
puts &quot;not found.&quot;</code></pre></div>

<hr>

<h2 id="toc_9">第20章</h2>

<p>（1）的参考答案  </p>

<p>通过正则表达式把日期与时间转换为中文字符串。当前时间用Time.now方法获取，用以填补传进来的字符串缺少的项目。最后，利用Time.mktime方法生成时间。  </p>

<div><pre><code class="language-none">def cparsedate(str)
  now = Time.now
  year = now.year
  month = now.month
  day = now.day
  hour = now.hour
  min = now.min
  sec = now.sec 
  str.scan(/(上午|下午)?(\d+)(年|月|日|点|分|秒)/) do
    case $3
    when &quot;年&quot;
      year = $2.to_i
    when &quot;月&quot;
      month = $2.to_i
    when &quot;日&quot;
      day = $2.to_i
    when &quot;点&quot;
      hour = $2.to_i
      hour += 12 if $1 == &quot;下午&quot;
    when &quot;分&quot;
      min = $2.to_i
    when &quot;秒&quot;
      sec = $2.to_i
    end
  end
  return Time.mktime(year, month, day, hour, min, sec)
end

p cparsedate(&quot;2010年12月23日下午8点17分50秒&quot;)
p cparsedate(&quot;12月23日下午8点17分50秒&quot;)
p cparsedate(&quot;上午8时17分50秒&quot;)
p cparsedate(&quot;8点17分50秒&quot;)</code></pre></div>

<p>（2）的参考答案  </p>

<p>先删除以“.”开始的文件，再利用File.mtime方法取得时间后排序。最后输出文件名以及日期。  </p>

<div><pre><code class="language-none">def ls_t(path)
  entries = Dir.entries(path)                # 获取入口
  entries.reject!{|name| /^\./ =~ name }     # 删除文件名以&quot;.&quot;开始的文件

  mtimes = Hash.new                          # 边收集mtime边排序
  entries = entries.sort_by do |name|
    mtimes[name] = File.mtime(File.join(path, name))
  end

  entries.each do |name|
    printf(&quot;%-40s %s\n&quot;, name, mtimes[name]) # 输入文件名以及mtime
  end
rescue =&gt; ex
  puts ex.message
end

ls_t(ARGV[0] || &quot;.&quot;)</code></pre></div>

<p>（3）的参考答案  </p>

<p>下面是利用文具万年历的原理整理的日历。2月30日等不存在的日期，与月末的日期进行比较后就会弹起来（跳到下一个月）。另外，在表格中不存在的日期，为了让它们遇到相同的条件时也能弹起来，我们将它们的初始值设为99。  </p>

<div><pre><code class="language-none">require &quot;date&quot;

module Calendar
  WEEK_TABLE = [
    [99, 99, 99, 99, 99, 99,  1,  2,  3,  4,  5,  6,  7],
    [ 2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14],
    [ 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21],
    [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28],
    [23, 24, 25, 26, 27, 28, 29, 30, 31, 99, 99, 99, 99],
    [30, 31, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99],
  ]

  module_function

  def cal(year, month)
    first = Date.new(year, month, 1)       # 被指定的月的1号
    end_of_month = ((first &gt;&gt; 1) - 1).day  # 次月的1号的前1天
    start = 6 - first.wday                 # 表示在表格的哪个位置

    puts first.strftime(&quot;%B %Y&quot;).center(21)
    puts &quot; Su Mo Tu We Th Fr St&quot;
    WEEK_TABLE.each do |week|
      buf = &quot;&quot;
      week[start, 7].each do |day|
        if day &gt; end_of_month
          buf &lt;&lt; &quot;   &quot;
        else
          buf &lt;&lt; sprintf(&quot;%3d&quot;, day)
        end
      end
      puts buf
    end
  end
end

t = Date.today
Calendar.cal(t.year, t.month)</code></pre></div>

<hr>

<h2 id="toc_10">第21章</h2>

<p>（1）的参考答案  </p>

<p>通过each方法从obj中逐个获取元素并用块执行，然后再把执行后的结果保存到数组。  </p>

<div><pre><code class="language-none">def my_collect(obj, &amp;block)
  buf = []
  obj.each do |elem|
    buf &lt;&lt; block.call(elem)
  end
  buf
end

ary = my_collect([1,2,3,4,5]) do |i|
  i * 2
end

p ary  #=&gt; [2, 4, 6, 8, 10]</code></pre></div>

<p>（2）的参考答案  </p>

<p>会得到下面的结果。  </p>

<div><pre><code class="language-none">to_class = :class.to_proc
p to_class.call(&quot;test&quot;)    #=&gt; String
p to_class.call(123)       #=&gt; Fixnum
p to_class.call(2 ** 100)  #=&gt; Bignum</code></pre></div>

<p>（3）的参考答案  </p>

<p>累加在方法中定义的局部变量值。  </p>

<div><pre><code class="language-none">def accumlator
  total = 0
  Proc.new do |x|
    total += x
  end
end

acc = accumlator
p acc.call(1)    #=&gt; 1
p acc.call(2)    #=&gt; 3
p acc.call(3)    #=&gt; 6
p acc.call(4)    #=&gt; 10</code></pre></div>



<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>

<script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>
